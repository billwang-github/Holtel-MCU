"File: Init.c        Assembler  Version HGASM0202      Page 1


   1  0000              ; Generated by holtek-gcc v3.12, Mon Jul 14 17:33:29 2014
   2  0000              ; 
   3  0000              ; Configuration:
   4  0000              ;       without long instruction
   5  0000              ;       Single ROM, Multi-RAM
   6  0000              ;       bits_per_rom_unit:16
   7  0000              ;       with mp1
   8  0000              ;       with tbhp, address(0x9)
   9  0000              ;          Use tabrd-const
  10  0000              ;       
  11  0000              ;       
  12  0000              ; use 'tabrdc' instread of 'tabrd'
  13  0000              ;       
  14  0000              
  15  0000              #pragma translator "holtek-gcc 4.6.4" "3.12" "build 20130711"
  16  0000              ; Rebuild 68
  17  0000              
  18  0000              ir equ [2]
  19  0000              mp equ [3]
  20  0000              sbp equ [1]
  21  0000              acc equ [5]
  22  0000              bp equ [4]
  23  0000              tblp equ [7]
  24  0000              tbhp equ [9]
  25  0000              status equ [10]
  26  0000              c equ [10].0
  27  0000              ac equ [10].1
  28  0000              z equ [10].2
  29  0000              ov equ [10].3
  30  0000              intc equ [11]
  31  0000              
  32  0000              extern ra:byte
  33  0000              extern rb:byte
  34  0000              extern rc:byte
  35  0000              extern rd:byte
  36  0000              extern re:byte
  37  0000              extern rf:byte
  38  0000              extern rg:byte
  39  0000              extern rh:byte
  40  0000              extern _Crom2Prom:near
  41  0000              extern _Crom2PromNext:near
  42  0000              
  43  0000              RAMBANK 0 @HCCINIT, @HCCINIT0
  44  0000              @HCCINIT	.section 'data'
  45  0000              @HCCINIT0	.section 'data'
  46  0000              
  47  0000              #pragma debug scope 1 1
  48  0000              public _ClockInit
  49  0000              #pragma debug scope 2 1

  16  0000              #line 16 "F:\Project\Code\PTMExampleCode\Init.c"
  16  0000              _ClockInit .section 'code'
  16  0000              _ClockInit proc
  17  0000              #line 17 "F:\Project\Code\PTMExampleCode\Init.c"
  17  0000  0F01        	mov a,1
  17  0001  008B        	mov [11],a
  17  0002              _L3:
  18  0002              #line 18 "F:\Project\Code\PTMExampleCode\Init.c"
  18  0002  390B        	snz [11].2
"File: Init.c        Assembler  Version HGASM0202      Page 2

  18  0003  2800     R  	jmp _L3
  18  0004  0003        	ret
  18  0005              _ClockInit endp
  18  0005              #line 18 "F:\Project\Code\PTMExampleCode\Init.c"
  18  0005              #pragma debug scope 1 1
  18  0005              public _GPIOInit
  18  0005              #pragma debug scope 3 1
  22  0005              #line 22 "F:\Project\Code\PTMExampleCode\Init.c"
  22  0000              _GPIOInit .section 'code'
  22  0000              _GPIOInit proc
  23  0000              #line 23 "F:\Project\Code\PTMExampleCode\Init.c"
  23  0000  371D        	clr [29].6
  24  0001              #line 24 "F:\Project\Code\PTMExampleCode\Init.c"
  24  0001  371F        	clr [31].6
  25  0002              #line 25 "F:\Project\Code\PTMExampleCode\Init.c"
  25  0002  331E        	set [30].6
  25  0003  0003        	ret
  25  0004              _GPIOInit endp
  25  0004              #line 25 "F:\Project\Code\PTMExampleCode\Init.c"
  25  0004              #pragma debug scope 1 1
  25  0004              public _WatchDogInit
  25  0004              #pragma debug scope 4 1
  29  0004              #line 29 "F:\Project\Code\PTMExampleCode\Init.c"
  29  0000              _WatchDogInit .section 'code'
  29  0000              _WatchDogInit proc
  30  0000              #line 30 "F:\Project\Code\PTMExampleCode\Init.c"
  30  0000  0F57        	mov a,87
  30  0001  008E        	mov [14],a
  30  0002  0003        	ret
  30  0003              _WatchDogInit endp
  30  0003              #line 30 "F:\Project\Code\PTMExampleCode\Init.c"
  30  0003              #pragma debug scope 1 1
  30  0003              public _PwmInit
  30  0003              #pragma debug scope 5 1
  36  0003              #line 36 "F:\Project\Code\PTMExampleCode\Init.c"
  36  0000              _PwmInit .section 'code'
  36  0000              _PwmInit proc
  37  0000              #line 37 "F:\Project\Code\PTMExampleCode\Init.c"
  37  0000  0F7C        	mov a,low 017ch
  37  0001  0083        	mov mp,a
  37  0002  0F01        	mov a,high 017ch
  37  0003  0081        	mov sbp,a
  37  0004  0701        	mov a,sbp
  37  0005  0084        	mov bp,a
  37  0006  0FAA        	mov a,170
  37  0007  0082        	mov ir,a
  38  0008              #line 38 "F:\Project\Code\PTMExampleCode\Init.c"
  38  0008  0F7D        	mov a,low 017dh
  38  0009  0083        	mov mp,a
  38  000A  0F01        	mov a,high 017dh
  38  000B  0081        	mov sbp,a
  38  000C  0701        	mov a,sbp
  38  000D  0084        	mov bp,a
  38  000E  0F0A        	mov a,10
  38  000F  0082        	mov ir,a
  41  0010              #line 41 "F:\Project\Code\PTMExampleCode\Init.c"
  41  0010  0F81        	mov a,129
  41  0011  00DF        	mov [95],a
  43  0012              #line 43 "F:\Project\Code\PTMExampleCode\Init.c"
  43  0012  0F02        	mov a,2
"File: Init.c        Assembler  Version HGASM0202      Page 3

  43  0013  00E7        	mov [103],a
  44  0014              #line 44 "F:\Project\Code\PTMExampleCode\Init.c"
  44  0014  0F80        	mov a,128
  44  0015  00E6        	mov [102],a
  46  0016              #line 46 "F:\Project\Code\PTMExampleCode\Init.c"
  46  0016  1F61        	clr [97]
  47  0017              #line 47 "F:\Project\Code\PTMExampleCode\Init.c"
  47  0017  1F60        	clr [96]
  48  0018              #line 48 "F:\Project\Code\PTMExampleCode\Init.c"
  48  0018  1F63        	clr [99]
  49  0019              #line 49 "F:\Project\Code\PTMExampleCode\Init.c"
  49  0019  1F62        	clr [98]
  50  001A              #line 50 "F:\Project\Code\PTMExampleCode\Init.c"
  50  001A  1F65        	clr [101]
  51  001B              #line 51 "F:\Project\Code\PTMExampleCode\Init.c"
  51  001B  1F64        	clr [100]
  53  001C              #line 53 "F:\Project\Code\PTMExampleCode\Init.c"
  53  001C  1F6A        	clr [106]
  54  001D              #line 54 "F:\Project\Code\PTMExampleCode\Init.c"
  54  001D  1F6B        	clr [107]
  56  001E              #line 56 "F:\Project\Code\PTMExampleCode\Init.c"
  56  001E  0F85        	mov a,133
  56  001F  00EC        	mov [108],a
  57  0020              #line 57 "F:\Project\Code\PTMExampleCode\Init.c"
  57  0020  0FA4        	mov a,164
  57  0021  00EE        	mov [110],a
  58  0022              #line 58 "F:\Project\Code\PTMExampleCode\Init.c"
  58  0022  1F6F        	clr [111]
  60  0023              #line 60 "F:\Project\Code\PTMExampleCode\Init.c"
  60  0023  31DF        	set [95].3
  60  0024  0003        	ret
  60  0025              _PwmInit endp
  60  0025              #line 60 "F:\Project\Code\PTMExampleCode\Init.c"
  60  0025              #pragma debug scope 1 1
  60  0025              public _SetDuty
  60  0025              #pragma debug scope 6 1
  65  0025              #line 65 "F:\Project\Code\PTMExampleCode\Init.c"
  65  0000              _SetDuty .section 'code'
  65  0000              _SetDuty proc
  65  0000              public _SetDuty_2
  65  0000  0002[           local _SetDuty_2 db 2 dup(?)	; 2,0
            00
            ]
  65  0002              #pragma debug variable 12 6 _SetDuty_2+0 "duty"
  65  0000  0700     R  	mov a,_SetDuty_2[0]
  65  0001  0080     E  	mov rb,a
  65  0002  0700     R  	mov a,_SetDuty_2[1]
  65  0003  0080     E  	mov rc,a
  65  0004  0F80        	mov a,128
  65  0005  0200     E  	sub a,rb
  65  0006  0F02        	mov a,2
  65  0007  1200     E  	sbc a,rc
  65  0008  3C0A        	sz c
  65  0009  2800     R  	jmp _L9
  65  000A  0F80        	mov a,-128
  65  000B  0080     E  	mov rb,a
  65  000C  0F02        	mov a,2
  65  000D  0080     E  	mov rc,a
  65  000E              _L9:
  70  000E              #line 70 "F:\Project\Code\PTMExampleCode\Init.c"
"File: Init.c        Assembler  Version HGASM0202      Page 4

  70  000E  0700     E  	mov a,rc
  70  000F  00E1        	mov [97],a
  71  0010              #line 71 "F:\Project\Code\PTMExampleCode\Init.c"
  71  0010  0700     E  	mov a,rb
  71  0011  00E0        	mov [96],a
  72  0012              #line 72 "F:\Project\Code\PTMExampleCode\Init.c"
  72  0012  0700     E  	mov a,rc
  72  0013  00E3        	mov [99],a
  73  0014              #line 73 "F:\Project\Code\PTMExampleCode\Init.c"
  73  0014  0700     E  	mov a,rb
  73  0015  00E2        	mov [98],a
  74  0016              #line 74 "F:\Project\Code\PTMExampleCode\Init.c"
  74  0016  0700     E  	mov a,rc
  74  0017  00E5        	mov [101],a
  75  0018              #line 75 "F:\Project\Code\PTMExampleCode\Init.c"
  75  0018  0700     E  	mov a,rb
  75  0019  00E4        	mov [100],a
  75  001A  0003        	ret
  75  001B              _SetDuty endp
  75  001B              #line 75 "F:\Project\Code\PTMExampleCode\Init.c"
  75  001B              #pragma debug scope 1 1
  75  001B              public _Timer1Init
  75  001B              #pragma debug scope 7 1
  81  001B              #line 81 "F:\Project\Code\PTMExampleCode\Init.c"
  81  0000              _Timer1Init .section 'code'
  81  0000              _Timer1Init proc
 101  0000              #line 101 "F:\Project\Code\PTMExampleCode\Init.c"
 101  0000  0F7E        	mov a,low 017eh
 101  0001  0083        	mov mp,a
 101  0002  0F01        	mov a,high 017eh
 101  0003  0081        	mov sbp,a
 101  0004  0701        	mov a,sbp
 101  0005  0084        	mov bp,a
 101  0006  0702        	mov a,ir
 101  0007  0080     E  	mov ra,a
 101  0008  0F50        	mov a,80
 101  0009  0580     E  	orm a,ra
 101  000A  0701        	mov a,sbp
 101  000B  0084        	mov bp,a
 101  000C  0700     E  	mov a,ra
 101  000D  0082        	mov ir,a
 102  000E              #line 102 "F:\Project\Code\PTMExampleCode\Init.c"
 102  000E  0F10        	mov a,16
 102  000F  00C7        	mov [71],a
 103  0010              #line 103 "F:\Project\Code\PTMExampleCode\Init.c"
 103  0010  0F34        	mov a,52
 103  0011  00C8        	mov [72],a
 104  0012              #line 104 "F:\Project\Code\PTMExampleCode\Init.c"
 104  0012  1F4D        	clr [77]
 105  0013              #line 105 "F:\Project\Code\PTMExampleCode\Init.c"
 105  0013  0F05        	mov a,5
 105  0014  00CE        	mov [78],a
 106  0015              #line 106 "F:\Project\Code\PTMExampleCode\Init.c"
 106  0015  0700     E  	mov a,_Duty[0]
 106  0016  00CB        	mov [75],a
 107  0017              #line 107 "F:\Project\Code\PTMExampleCode\Init.c"
 107  0017  0700     E  	mov a,_Duty[1]
 107  0018  00CC        	mov [76],a
 111  0019              #line 111 "F:\Project\Code\PTMExampleCode\Init.c"
 111  0019  361A        	clr [26].4
"File: Init.c        Assembler  Version HGASM0202      Page 5

 112  001A              #line 112 "F:\Project\Code\PTMExampleCode\Init.c"
 112  001A  301A        	set [26].0
 113  001B              #line 113 "F:\Project\Code\PTMExampleCode\Init.c"
 113  001B  3793        	clr [19].7
 114  001C              #line 114 "F:\Project\Code\PTMExampleCode\Init.c"
 114  001C  3193        	set [19].3
 115  001D              #line 115 "F:\Project\Code\PTMExampleCode\Init.c"
 115  001D  31C7        	set [71].3
 115  001E  0003        	ret
 115  001F              _Timer1Init endp
 115  001F              #line 115 "F:\Project\Code\PTMExampleCode\Init.c"
 115  001F              #pragma debug scope 1 1
 115  001F              public _SystemInit
 115  001F              #pragma debug scope 8 1
   6  001F              #line 6 "F:\Project\Code\PTMExampleCode\Init.c"
   6  0000              _SystemInit .section 'code'
   6  0000              _SystemInit proc
   7  0000              #line 7 "F:\Project\Code\PTMExampleCode\Init.c"
   7  0000  2000     R  	call _ClockInit
   8  0001              #line 8 "F:\Project\Code\PTMExampleCode\Init.c"
   8  0001  2000     R  	call _GPIOInit
   9  0002              #line 9 "F:\Project\Code\PTMExampleCode\Init.c"
   9  0002  2000     R  	call _PwmInit
  10  0003              #line 10 "F:\Project\Code\PTMExampleCode\Init.c"
  10  0003  2000     R  	call _Timer1Init
  10  0004              #pragma debug scope 9 8
  10  0004              ;begin block, line: 10.-1
  10  0004              #pragma debug scope 10 9
  10  0004              ;begin block, line: 10.-1
  30  0004              #line 30 "F:\Project\Code\PTMExampleCode\Init.c"
  30  0004  0F57        	mov a,87
  30  0005  008E        	mov [14],a
  30  0006              #pragma debug scope 9 8
  30  0006              ;end block, line: 30
  30  0006              #pragma debug scope 8 1
  30  0006              ;end block, line: 30
  30  0006  0003        	ret
  30  0007              _SystemInit endp
  30  0007              #line 30 "F:\Project\Code\PTMExampleCode\Init.c"
  30  0007              #pragma debug scope 1 1
  30  0007              public _Timer1_SetDuty
  30  0007              #pragma debug scope 11 1
 149  0007              #line 149 "F:\Project\Code\PTMExampleCode\Init.c"
 149  0000              _Timer1_SetDuty .section 'code'
 149  0000              _Timer1_SetDuty proc
 149  0000              public _Timer1_SetDuty_2
 149  0000  0004[           local _Timer1_SetDuty_2 db 4 dup(?)	; 4,0
            00
            ]
 149  0004              #pragma debug variable 12 11 _Timer1_SetDuty_2+0 "duty"
 149  0004              #pragma debug variable 12 11 _Timer1_SetDuty_2+2 "period"
 161  0000              #line 161 "F:\Project\Code\PTMExampleCode\Init.c"
 161  0000  0700     R  	mov a,_Timer1_SetDuty_2[0]
 161  0001  00CB        	mov [75],a
 162  0002              #line 162 "F:\Project\Code\PTMExampleCode\Init.c"
 162  0002  0700     R  	mov a,_Timer1_SetDuty_2[1]
 162  0003  00CC        	mov [76],a
 163  0004              #line 163 "F:\Project\Code\PTMExampleCode\Init.c"
 163  0004  0700     R  	mov a,_Timer1_SetDuty_2[2]
 163  0005  00CD        	mov [77],a
"File: Init.c        Assembler  Version HGASM0202      Page 6

 164  0006              #line 164 "F:\Project\Code\PTMExampleCode\Init.c"
 164  0006  0700     R  	mov a,_Timer1_SetDuty_2[3]
 164  0007  00CE        	mov [78],a
 164  0008  0003        	ret
 164  0009              _Timer1_SetDuty endp
 164  0009              #line 164 "F:\Project\Code\PTMExampleCode\Init.c"
 164  0009              #pragma debug scope 1 1
 164  0009              ___smod equ [00bh]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug variable 43 1 [00bh] "__smod" 1
 164  0009              ___wdtc equ [00eh]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug variable 45 1 [00eh] "__wdtc" 1
 164  0009              ___intc2 equ [013h]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug variable 47 1 [013h] "__intc2" 1
 164  0009              ___mfi5 equ [01ah]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug variable 49 1 [01ah] "__mfi5" 1
 164  0009              ___papu equ [01dh]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug variable 51 1 [01dh] "__papu" 1
 164  0009              ___pa equ [01eh]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug variable 53 1 [01eh] "__pa" 1
 164  0009              ___pac equ [01fh]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug variable 55 1 [01fh] "__pac" 1
 164  0009              ___ptm1c0 equ [047h]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug variable 57 1 [047h] "__ptm1c0" 1
 164  0009              ___ptm1c1 equ [048h]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
"File: Init.c        Assembler  Version HGASM0202      Page 7

 164  0009              #pragma debug variable 59 1 [048h] "__ptm1c1" 1
 164  0009              ___ptm1al equ [04bh]
 164  0009              #pragma debug variable 8 1 [04bh] "__ptm1al" 1
 164  0009              ___ptm1ah equ [04ch]
 164  0009              #pragma debug variable 8 1 [04ch] "__ptm1ah" 1
 164  0009              ___ptm1rpl equ [04dh]
 164  0009              #pragma debug variable 8 1 [04dh] "__ptm1rpl" 1
 164  0009              ___ptm1rph equ [04eh]
 164  0009              #pragma debug variable 8 1 [04eh] "__ptm1rph" 1
 164  0009              ___pwmc equ [05fh]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug variable 61 1 [05fh] "__pwmc" 1
 164  0009              ___dutr0l equ [060h]
 164  0009              #pragma debug variable 8 1 [060h] "__dutr0l" 1
 164  0009              ___dutr0h equ [061h]
 164  0009              #pragma debug variable 8 1 [061h] "__dutr0h" 1
 164  0009              ___dutr1l equ [062h]
 164  0009              #pragma debug variable 8 1 [062h] "__dutr1l" 1
 164  0009              ___dutr1h equ [063h]
 164  0009              #pragma debug variable 8 1 [063h] "__dutr1h" 1
 164  0009              ___dutr2l equ [064h]
 164  0009              #pragma debug variable 8 1 [064h] "__dutr2l" 1
 164  0009              ___dutr2h equ [065h]
 164  0009              #pragma debug variable 8 1 [065h] "__dutr2h" 1
 164  0009              ___prdrl equ [066h]
 164  0009              #pragma debug variable 8 1 [066h] "__prdrl" 1
 164  0009              ___prdrh equ [067h]
 164  0009              #pragma debug variable 8 1 [067h] "__prdrh" 1
 164  0009              ___pwmme equ [06ah]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug variable 63 1 [06ah] "__pwmme" 1
 164  0009              ___pwmmd equ [06bh]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug variable 65 1 [06bh] "__pwmmd" 1
 164  0009              ___mcf equ [06ch]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug variable 67 1 [06ch] "__mcf" 1
 164  0009              ___dts equ [06eh]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug variable 69 1 [06eh] "__dts" 1
 164  0009              ___plc equ [06fh]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
"File: Init.c        Assembler  Version HGASM0202      Page 8

 164  0009              #pragma debug variable 71 1 [06fh] "__plc" 1
 164  0009              ___pcps0 equ [017ch]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug variable 73 1 [017ch] "__pcps0" 1
 164  0009              ___pcps1 equ [017dh]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug variable 75 1 [017dh] "__pcps1" 1
 164  0009              ___pdps0 equ [017eh]
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug struct_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug union_end
 164  0009              #pragma debug variable 77 1 [017eh] "__pdps0" 1
 164  0009              
 164  0009              ; output external variables
 164  0009              extern _Duty:byte
 164  0009              
 164  0009              ; 
 164  0009              ; Generated by holtek-gcc v3.12, Mon Jul 14 17:33:29 2014
 164  0009              ; Rebuild 68
 164  0009              ; end of file


        0 Errors, 0